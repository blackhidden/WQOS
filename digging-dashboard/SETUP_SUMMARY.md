# ğŸ‰ åŸºç¡€æ¶æ„æ­å»ºå®Œæˆæ€»ç»“

## âœ… **å·²å®Œæˆçš„å·¥ä½œ**

### ğŸ–¥ï¸ **åç«¯æ¶æ„ (FastAPI)**

#### 1. **é¡¹ç›®ç»“æ„**
```
backend/
â”œâ”€â”€ app/
â”‚   â”œâ”€â”€ main.py                 # FastAPIåº”ç”¨å…¥å£ âœ…
â”‚   â”œâ”€â”€ config.py              # åº”ç”¨é…ç½®ç®¡ç† âœ…
â”‚   â”œâ”€â”€ api/                   # APIè·¯ç”±
â”‚   â”‚   â”œâ”€â”€ auth.py           # è®¤è¯API âœ…
â”‚   â”‚   â”œâ”€â”€ config.py         # é…ç½®ç®¡ç†API âœ…
â”‚   â”‚   â”œâ”€â”€ process.py        # è¿›ç¨‹æ§åˆ¶API âœ…
â”‚   â”‚   â”œâ”€â”€ logs.py           # æ—¥å¿—API âœ…
â”‚   â”‚   â””â”€â”€ websocket.py      # WebSocket API âœ…
â”‚   â”œâ”€â”€ core/                  # æ ¸å¿ƒåŠŸèƒ½
â”‚   â”‚   â”œâ”€â”€ auth.py           # JWTè®¤è¯ âœ…
â”‚   â”‚   â””â”€â”€ exceptions.py     # è‡ªå®šä¹‰å¼‚å¸¸ âœ…
â”‚   â”œâ”€â”€ db/                    # æ•°æ®åº“
â”‚   â”‚   â”œâ”€â”€ database.py       # æ•°æ®åº“è¿æ¥ âœ…
â”‚   â”‚   â””â”€â”€ models.py         # SQLAlchemyæ¨¡å‹ âœ…
â”‚   â”œâ”€â”€ models/                # Pydanticæ¨¡å‹
â”‚   â”‚   â”œâ”€â”€ auth.py           # è®¤è¯æ¨¡å‹ âœ…
â”‚   â”‚   â””â”€â”€ config.py         # é…ç½®æ¨¡å‹ âœ…
â”‚   â””â”€â”€ utils/                 # å·¥å…·å‡½æ•°
â”‚       â””â”€â”€ tag_generator.py  # Tagç”Ÿæˆå™¨ âœ…
â”œâ”€â”€ requirements.txt           # ä¾èµ–åŒ… âœ…
â”œâ”€â”€ init_db.py                # æ•°æ®åº“åˆå§‹åŒ– âœ…
â””â”€â”€ run.py                    # å¯åŠ¨è„šæœ¬ âœ…
```

#### 2. **æ ¸å¿ƒåŠŸèƒ½**
- âœ… **FastAPIåº”ç”¨é…ç½®**: CORSã€ä¸­é—´ä»¶ã€å¼‚å¸¸å¤„ç†
- âœ… **JWTè®¤è¯ç³»ç»Ÿ**: ç”¨æˆ·ç™»å½•ã€ä»¤ç‰ŒéªŒè¯ã€æƒé™æ§åˆ¶
- âœ… **SQLiteæ•°æ®åº“**: ç”¨æˆ·è¡¨ã€é…ç½®æ¨¡æ¿è¡¨ã€è¿›ç¨‹è¡¨
- âœ… **APIè·¯ç”±æ¡†æ¶**: è®¤è¯ã€é…ç½®ã€è¿›ç¨‹ã€æ—¥å¿—ã€WebSocket
- âœ… **Tagç”Ÿæˆå™¨**: æ–°æ ¼å¼tagç”Ÿæˆå’ŒéªŒè¯
- âœ… **é»˜è®¤æ•°æ®**: ç®¡ç†å‘˜ç”¨æˆ·(admin/admin123)ã€ç¤ºä¾‹é…ç½®

#### 3. **æ•°æ®åº“è®¾è®¡**
- âœ… **ç”¨æˆ·è¡¨**: å”¯ä¸€ç”¨æˆ·è®¤è¯ç³»ç»Ÿ
- âœ… **é…ç½®æ¨¡æ¿è¡¨**: ä¸¤ç§æ¨¡å¼é…ç½®å­˜å‚¨
- âœ… **è¿›ç¨‹è¡¨**: æŒ–æ˜è¿›ç¨‹çŠ¶æ€è·Ÿè¸ª
- âœ… **å†å²è¡¨**: é…ç½®ä½¿ç”¨å†å²è®°å½•
- âœ… **æ—¥å¿—è¡¨**: ç³»ç»Ÿæ“ä½œå®¡è®¡

### ğŸ¨ **å‰ç«¯æ¶æ„ (React + TypeScript)**

#### 1. **é¡¹ç›®ç»“æ„**
```
frontend/
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ App.tsx               # ä¸»åº”ç”¨ç»„ä»¶ âœ…
â”‚   â”œâ”€â”€ index.css            # å…¨å±€æ ·å¼ âœ…
â”‚   â”œâ”€â”€ types/               # TypeScriptç±»å‹
â”‚   â”‚   â”œâ”€â”€ auth.ts          # è®¤è¯ç±»å‹ âœ…
â”‚   â”‚   â”œâ”€â”€ config.ts        # é…ç½®ç±»å‹ âœ…
â”‚   â”‚   â””â”€â”€ process.ts       # è¿›ç¨‹ç±»å‹ âœ…
â”‚   â”œâ”€â”€ components/          # ç»„ä»¶
â”‚   â”‚   â”œâ”€â”€ Auth/           # è®¤è¯ç»„ä»¶
â”‚   â”‚   â”‚   â””â”€â”€ ProtectedRoute.tsx âœ…
â”‚   â”‚   â””â”€â”€ Layout/         # å¸ƒå±€ç»„ä»¶
â”‚   â”‚       â””â”€â”€ DashboardLayout.tsx âœ…
â”‚   â”œâ”€â”€ pages/              # é¡µé¢ç»„ä»¶
â”‚   â”‚   â”œâ”€â”€ LoginPage.tsx   # ç™»å½•é¡µé¢ âœ…
â”‚   â”‚   â”œâ”€â”€ DashboardPage.tsx # ä¸»é¢æ¿ âœ…
â”‚   â”‚   â”œâ”€â”€ ConfigPage.tsx  # é…ç½®ç®¡ç† âœ…
â”‚   â”‚   â”œâ”€â”€ MonitorPage.tsx # è¿›ç¨‹ç›‘æ§ âœ…
â”‚   â”‚   â”œâ”€â”€ LogsPage.tsx    # æ—¥å¿—æŸ¥çœ‹ âœ…
â”‚   â”‚   â””â”€â”€ HistoryPage.tsx # å†å²è®°å½• âœ…
â”‚   â”œâ”€â”€ services/           # APIæœåŠ¡
â”‚   â”‚   â”œâ”€â”€ api.ts          # APIå®¢æˆ·ç«¯ âœ…
â”‚   â”‚   â”œâ”€â”€ auth.ts         # è®¤è¯æœåŠ¡ âœ…
â”‚   â”‚   â”œâ”€â”€ config.ts       # é…ç½®æœåŠ¡ âœ…
â”‚   â”‚   â””â”€â”€ process.ts      # è¿›ç¨‹æœåŠ¡ âœ…
â”‚   â””â”€â”€ store/              # çŠ¶æ€ç®¡ç†
â”‚       â”œâ”€â”€ index.ts        # Storeé…ç½® âœ…
â”‚       â”œâ”€â”€ authSlice.ts    # è®¤è¯çŠ¶æ€ âœ…
â”‚       â”œâ”€â”€ configSlice.ts  # é…ç½®çŠ¶æ€ âœ…
â”‚       â””â”€â”€ processSlice.ts # è¿›ç¨‹çŠ¶æ€ âœ…
â”œâ”€â”€ package.json            # ä¾èµ–ç®¡ç† âœ…
â””â”€â”€ public/                 # é™æ€èµ„æº âœ…
```

#### 2. **æ ¸å¿ƒåŠŸèƒ½**
- âœ… **React Router**: é¡µé¢è·¯ç”±å’Œä¿æŠ¤è·¯ç”±
- âœ… **Ant Design**: ä¼ä¸šçº§UIç»„ä»¶åº“
- âœ… **Redux Toolkit**: ç°ä»£åŒ–çŠ¶æ€ç®¡ç†
- âœ… **TypeScript**: ç±»å‹å®‰å…¨å’Œå¼€å‘ä½“éªŒ
- âœ… **Axios**: HTTPå®¢æˆ·ç«¯å’Œæ‹¦æˆªå™¨
- âœ… **å“åº”å¼è®¾è®¡**: ç§»åŠ¨ç«¯é€‚é…

#### 3. **é¡µé¢åŠŸèƒ½**
- âœ… **ç™»å½•é¡µé¢**: ç”¨æˆ·è®¤è¯ç•Œé¢
- âœ… **ä¸»æ§åˆ¶é¢æ¿**: ç³»ç»ŸçŠ¶æ€æ€»è§ˆ
- âœ… **é…ç½®ç®¡ç†**: æ¨¡æ¿åˆ›å»ºå’Œç®¡ç†ï¼ˆæ¡†æ¶ï¼‰
- âœ… **è¿›ç¨‹ç›‘æ§**: å®æ—¶çŠ¶æ€ç›‘æ§ï¼ˆæ¡†æ¶ï¼‰
- âœ… **æ—¥å¿—æŸ¥çœ‹**: å®æ—¶æ—¥å¿—æµï¼ˆæ¡†æ¶ï¼‰
- âœ… **å†å²è®°å½•**: æ“ä½œå†å²æŸ¥è¯¢ï¼ˆæ¡†æ¶ï¼‰

## ğŸ¯ **æ ¸å¿ƒé›†æˆåŠŸèƒ½**

### ğŸ·ï¸ **æ–°Tagç³»ç»Ÿ**
- âœ… **æ ¼å¼**: `region_delay_instrumentType_universe_(dataset_id|recommended_name)_step{N}`
- âœ… **ç¤ºä¾‹**: `USA_1_EQUITY_TOP3000_analyst11_step1`
- âœ… **æ”¯æŒ**: æ•°æ®é›†æ¨¡å¼ + æ¨èå­—æ®µæ¨¡å¼
- âœ… **éªŒè¯**: æ ¼å¼éªŒè¯å’Œå†²çªæ£€æµ‹

### ğŸ” **è®¤è¯ç³»ç»Ÿ**
- âœ… **JWTä»¤ç‰Œ**: 8å°æ—¶æœ‰æ•ˆæœŸ
- âœ… **å•ç”¨æˆ·æ¨¡å¼**: ç®¡ç†å‘˜è´¦æˆ·
- âœ… **æƒé™æ§åˆ¶**: å—ä¿æŠ¤è·¯ç”±
- âœ… **å®‰å…¨ç‰¹æ€§**: å¯†ç å“ˆå¸Œã€ä»¤ç‰ŒéªŒè¯

### ğŸ“Š **é…ç½®ç®¡ç†**
- âœ… **ä¸¤ç§æ¨¡å¼**: æ•°æ®é›†æ¨¡å¼ vs æ¨èå­—æ®µæ¨¡å¼
- âœ… **æ¨¡æ¿ç³»ç»Ÿ**: é…ç½®ä¿å­˜å’Œå¤ç”¨
- âœ… **å‚æ•°éªŒè¯**: å‰åç«¯åŒé‡éªŒè¯
- âœ… **å†å²è®°å½•**: ä½¿ç”¨å†å²è·Ÿè¸ª

## ğŸš€ **æŠ€æœ¯æ ˆæ€»ç»“**

### åç«¯æŠ€æœ¯æ ˆ
- **FastAPI**: ç°ä»£Python Webæ¡†æ¶
- **SQLAlchemy**: ORMå’Œæ•°æ®åº“ç®¡ç†
- **Pydantic**: æ•°æ®éªŒè¯å’Œåºåˆ—åŒ–
- **JWT**: å®‰å…¨è®¤è¯æœºåˆ¶
- **SQLite**: è½»é‡çº§æ•°æ®åº“

### å‰ç«¯æŠ€æœ¯æ ˆ
- **React 18**: ç°ä»£åŒ–UIæ¡†æ¶
- **TypeScript**: ç±»å‹å®‰å…¨å¼€å‘
- **Ant Design**: ä¼ä¸šçº§ç»„ä»¶åº“
- **Redux Toolkit**: çŠ¶æ€ç®¡ç†
- **Axios**: HTTPå®¢æˆ·ç«¯

### å¼€å‘å·¥å…·
- **Uvicorn**: ASGIæœåŠ¡å™¨
- **Create React App**: å‰ç«¯æ„å»ºå·¥å…·
- **ESLint + Prettier**: ä»£ç è§„èŒƒ
- **Git**: ç‰ˆæœ¬æ§åˆ¶

## ğŸ“ **é¡¹ç›®æ–‡ä»¶ç»“æ„**

```
digging-dashboard/
â”œâ”€â”€ backend/                    # FastAPIåç«¯
â”‚   â”œâ”€â”€ app/                   # åº”ç”¨ä»£ç 
â”‚   â”œâ”€â”€ dashboard.db           # SQLiteæ•°æ®åº“
â”‚   â”œâ”€â”€ requirements.txt       # Pythonä¾èµ–
â”‚   â””â”€â”€ init_db.py            # æ•°æ®åº“åˆå§‹åŒ–
â”œâ”€â”€ frontend/                   # Reactå‰ç«¯
â”‚   â”œâ”€â”€ src/                   # æºä»£ç 
â”‚   â”œâ”€â”€ public/                # é™æ€èµ„æº
â”‚   â”œâ”€â”€ package.json           # Node.jsä¾èµ–
â”‚   â””â”€â”€ build/                 # æ„å»ºè¾“å‡º
â”œâ”€â”€ deployment/                 # éƒ¨ç½²é…ç½®
â””â”€â”€ docs/                      # é¡¹ç›®æ–‡æ¡£
```

## ğŸ”§ **å½“å‰çŠ¶æ€**

### âœ… **å·²éªŒè¯åŠŸèƒ½**
1. **æ•°æ®åº“åˆå§‹åŒ–**: æˆåŠŸåˆ›å»ºè¡¨å’Œé»˜è®¤æ•°æ®
2. **æ¨¡å‹å¯¼å…¥**: Pythonæ¨¡å—å¯¼å…¥æ­£å¸¸
3. **é…ç½®ç³»ç»Ÿ**: åº”ç”¨é…ç½®åŠ è½½æ­£å¸¸
4. **Tagç”Ÿæˆå™¨**: æ–°æ ¼å¼tagç”Ÿæˆæµ‹è¯•é€šè¿‡
5. **å‰ç«¯ä¾èµ–**: Reacté¡¹ç›®åˆ›å»ºå’Œä¾èµ–å®‰è£…å®Œæˆ

### âš ï¸ **å¾…è§£å†³é—®é¢˜**
1. **å‰ç«¯TypeScript**: éœ€è¦ä¿®å¤dispatchç±»å‹é”™è¯¯
2. **åç«¯å¯åŠ¨**: éœ€è¦è°ƒè¯•uvicornå¯åŠ¨é—®é¢˜
3. **APIé›†æˆ**: å‰åç«¯è¿æ¥æµ‹è¯•

### ğŸ”„ **ä¸‹ä¸€æ­¥å·¥ä½œ**
1. **ä¿®å¤å‰ç«¯ç¼–è¯‘é”™è¯¯**
2. **æµ‹è¯•åç«¯APIæœåŠ¡**
3. **å‰åç«¯é›†æˆæµ‹è¯•**
4. **å®ç°æ ¸å¿ƒåŠŸèƒ½é¡µé¢**

## ğŸ‰ **æˆæœå±•ç¤º**

### ğŸ—„ï¸ **æ•°æ®åº“ç»“æ„**
```sql
-- ç”¨æˆ·è¡¨
dashboard_user (id, username, password_hash, email, created_at, last_login, is_active)

-- é…ç½®æ¨¡æ¿è¡¨
digging_config_templates (id, template_name, description, use_recommended_fields, 
                         region, universe, delay, instrument_type, max_trade, 
                         n_jobs, dataset_id, recommended_name, recommended_fields,
                         tag_name, created_at, updated_at, created_by)

-- è¿›ç¨‹è¡¨
digging_processes (id, config_template_id, process_id, status, tag_name,
                  started_at, stopped_at, log_file_path, error_message,
                  total_expressions, completed_expressions, started_by, notes)
```

### ğŸ”— **APIç«¯ç‚¹**
```
è®¤è¯ API:
POST /api/auth/login         # ç”¨æˆ·ç™»å½•
POST /api/auth/logout        # ç”¨æˆ·ç™»å‡º
GET  /api/auth/me           # è·å–ç”¨æˆ·ä¿¡æ¯

é…ç½® API:
GET  /api/config/templates   # è·å–é…ç½®æ¨¡æ¿
POST /api/config/templates   # åˆ›å»ºé…ç½®æ¨¡æ¿
PUT  /api/config/templates/{id} # æ›´æ–°é…ç½®æ¨¡æ¿
DELETE /api/config/templates/{id} # åˆ é™¤é…ç½®æ¨¡æ¿

è¿›ç¨‹ API:
POST /api/process/start      # å¯åŠ¨æŒ–æ˜è¿›ç¨‹
POST /api/process/stop/{id}  # åœæ­¢æŒ–æ˜è¿›ç¨‹
GET  /api/process/status     # è·å–è¿›ç¨‹çŠ¶æ€
GET  /api/process/history    # è·å–è¿›ç¨‹å†å²

WebSocket:
/ws/logs                     # å®æ—¶æ—¥å¿—æµ
/ws/process-status          # å®æ—¶è¿›ç¨‹çŠ¶æ€
```

### ğŸ¨ **å‰ç«¯é¡µé¢**
```
è·¯ç”±ç»“æ„:
/login                      # ç™»å½•é¡µé¢
/dashboard                  # ä¸»æ§åˆ¶é¢æ¿
/config                     # é…ç½®ç®¡ç†
/monitor                    # è¿›ç¨‹ç›‘æ§
/logs                       # æ—¥å¿—æŸ¥çœ‹
/history                    # å†å²è®°å½•
```

## ğŸ† **é¡¹ç›®äº®ç‚¹**

1. **ğŸ·ï¸ æ™ºèƒ½Tagç³»ç»Ÿ**: æ”¯æŒä¸¤ç§é…ç½®æ¨¡å¼çš„ç»Ÿä¸€tagæ ¼å¼
2. **ğŸ” å®‰å…¨è®¤è¯**: JWT + å“ˆå¸Œå¯†ç çš„å®‰å…¨è®¤è¯ä½“ç³»
3. **ğŸ“Š ç±»å‹å®‰å…¨**: å‰åç«¯TypeScript/PydanticåŒé‡ç±»å‹ä¿æŠ¤
4. **ğŸ¨ ç°ä»£UI**: Ant Design + å“åº”å¼è®¾è®¡
5. **âš¡ é«˜æ€§èƒ½**: FastAPIå¼‚æ­¥ + Reactå‡½æ•°ç»„ä»¶
6. **ğŸ—„ï¸ æ•°æ®æŒä¹…åŒ–**: SQLite + SQLAlchemy ORM
7. **ğŸ”„ å®æ—¶é€šä¿¡**: WebSocketæ”¯æŒå®æ—¶æ—¥å¿—å’ŒçŠ¶æ€æ›´æ–°
8. **ğŸ“± ç§»åŠ¨å‹å¥½**: å“åº”å¼è®¾è®¡æ”¯æŒå¤šè®¾å¤‡
9. **ğŸ”§ å¯æ‰©å±•**: æ¨¡å—åŒ–æ¶æ„ä¾¿äºåŠŸèƒ½æ‰©å±•
10. **ğŸ“ å®Œæ•´æ–‡æ¡£**: è¯¦ç»†çš„APIæ–‡æ¡£å’Œç”¨æˆ·æŒ‡å—

åŸºç¡€æ¶æ„æ­å»ºå·²ç»å®Œæˆï¼Œä¸ºåç»­çš„åŠŸèƒ½å¼€å‘å¥ å®šäº†åšå®çš„åŸºç¡€ï¼ğŸš€
